<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jam3a 2.0</title>
  
  <!-- Digital Ocean specific fix for React reference error -->
  <!-- Load React directly from CDN before any other scripts -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  
  <!-- Make React globally available -->
  <script>
    window.React = React;
    window.ReactDOM = ReactDOM;
    console.log('React loaded from CDN and made globally available');
  </script>
  
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-G3N8DYCLBM"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-G3N8DYCLBM');
  </script>
</head>
<body>
  <div id="root">
    <!-- Loading indicator that will be replaced when React loads -->
    <div style="display: flex; justify-content: center; align-items: center; height: 100vh; flex-direction: column;">
      <h2>Loading Jam3a 2.0...</h2>
      <p>If this message persists, please check the console for errors.</p>
    </div>
  </div>
  
  <!-- Error handling script -->
  <script>
    window.addEventListener('error', function(event) {
      if (event.message && event.message.includes('React is not defined')) {
        console.error('Caught React not defined error, attempting recovery...');
        
        // Try to reload React
        var reactScript = document.createElement('script');
        reactScript.src = 'https://unpkg.com/react@18/umd/react.production.min.js';
        reactScript.onload = function() {
          var reactDOMScript = document.createElement('script');
          reactDOMScript.src = 'https://unpkg.com/react-dom@18/umd/react-dom.production.min.js';
          reactDOMScript.onload = function() {
            window.React = React;
            window.ReactDOM = ReactDOM;
            console.log('React reloaded successfully!');
            window.location.reload();
          };
          document.head.appendChild(reactDOMScript);
        };
        document.head.appendChild(reactScript);
      }
    });
  </script>
</body>
</html>
